{% extends "base.html" %}
{% load static %}

{% block scripts %}
  <script src="{% static 'js/photo.js' %}"></script>
{% endblock %}

{% block content %}
<div>
  <br>  
  <br>
  <br>
  <br> 
</div>

<div class="w-40 pa3 b--light-purple b--dashed">
  <h2>{{ album.title }}
    <a id="toggle-starred" data-album-id="{{ album.pk }}" class="no-underline pointer dib grow">
      {% if photo.starred %}
        &#9733;
      {% else %}
        &#9734;
      {% endif %}
      </a>
  </h2>

  <ul style='list-style-type: none'>
      <div><img src="{{ photo.image.url }}"><br>{{ photo.title }}
        <a class="red" href="{% url 'list_comments' pk=photo.pk %}">Comments</a>
      </div>

    </ul>
</div>

<div>
    <br><a class="red" href="{% url 'list_photos' %}">Photo List</a>
    <a class="red" href="{% url 'list_albums' %}">Album List</a>
    <a href="{% url 'profile' %}">Profile Page</a><br>
</div>

<script>
  const toggleStarredLink = document.querySelector("#toggle-starred")
    toggleStarredLink.addEventListener('click', function (e) {
      e.preventDefault()
      const photoId = toggleStarredLink.dataset['photoId']
      fetch(`/photos/${photoId}/Starred/`, {
          method: 'POST'
      })
      .then(res => res.json())
      .then(data => {
          if (data.starred) {
              toggleStarredLink.innerHTML = '&#9733;'
        } else {
      toggleStarredLink.innerHTML = '&#9734;'
        }
      })
  
    })

</script>
{% endblock %}